-- SERVICES
local Players = game:GetService("Players")
local TweenService = game:GetService("TweenService")
local LocalPlayer = Players.LocalPlayer

-- ===== WELCOME GUI =====
local welcomeGui = Instance.new("ScreenGui")
welcomeGui.Name = "WelcomeGui"
welcomeGui.Parent = game.CoreGui

local leftCurtain = Instance.new("Frame", welcomeGui)
local rightCurtain = Instance.new("Frame", welcomeGui)

leftCurtain.Size = UDim2.new(0.5,0,1,0)
leftCurtain.Position = UDim2.new(0,0,0,0)
rightCurtain.Size = UDim2.new(0.5,0,1,0)
rightCurtain.Position = UDim2.new(0.5,0,0,0)

for _,v in pairs({leftCurtain,rightCurtain}) do
    v.BackgroundColor3 = Color3.fromRGB(15,15,15)
    v.BorderSizePixel = 0
end

local text = Instance.new("TextLabel", welcomeGui)
text.Size = UDim2.new(1,0,0.3,0)
text.Position = UDim2.new(0,0,0.35,0)
text.BackgroundTransparency = 1
text.TextColor3 = Color3.new(1,1,1)
text.Font = Enum.Font.GothamBold
text.TextSize = 32
text.TextWrapped = true
text.Text = "Welcome\n"..LocalPlayer.Name.."\n\nDucMagic"

-- OPEN CURTAIN
TweenService:Create(leftCurtain,TweenInfo.new(1),
    {Position = UDim2.new(-0.5,0,0,0)}):Play()
TweenService:Create(rightCurtain,TweenInfo.new(1),
    {Position = UDim2.new(1,0,0,0)}):Play()

task.wait(2)

-- CLOSE CURTAIN
TweenService:Create(leftCurtain,TweenInfo.new(1),
    {Position = UDim2.new(0,0,0,0)}):Play()
TweenService:Create(rightCurtain,TweenInfo.new(1),
    {Position = UDim2.new(0.5,0,0,0)}):Play()

task.wait(1.2)
welcomeGui:Destroy()

-- ===== MAIN GUI =====
local gui = Instance.new("ScreenGui", game.CoreGui)
gui.Name = "DucMagic"

local frame = Instance.new("Frame", gui)
frame.Size = UDim2.new(0,220,0,110)
frame.Position = UDim2.new(0.5,-110,0.4,0)
frame.BackgroundColor3 = Color3.fromRGB(30,30,30)
frame.BorderSizePixel = 0
frame.Active = true
frame.Draggable = true

local btn = Instance.new("TextButton", frame)
btn.Size = UDim2.new(1,-20,0,45)
btn.Position = UDim2.new(0,10,0.5,-22)
btn.Text = "Auto Fruit : OFF"
btn.Font = Enum.Font.GothamBold
btn.TextSize = 14
btn.TextColor3 = Color3.new(1,1,1)
btn.BackgroundColor3 = Color3.fromRGB(170,0,0)
btn.BorderSizePixel = 0

-- ===== AUTO FRUIT LOGIC =====
local enabled = false

local function getHRP()
    local c = LocalPlayer.Character or LocalPlayer.CharacterAdded:Wait()
    return c:WaitForChild("HumanoidRootPart")
end

local function getFruitFolder()
    return workspace:FindFirstChild("Scriptable")
    and workspace.Scriptable:FindFirstChild("Spawners")
    and workspace.Scriptable.Spawners:FindFirstChild("Fruit")
end

local function isRealFruit(p)
    return p:IsA("BasePart")
    and p.Transparency < 1
    and p.CanCollide == false
    and p:FindFirstChild("TouchInterest")
end

btn.MouseButton1Click:Connect(function()
    enabled = not enabled
    btn.Text = enabled and "Auto Fruit : ON" or "Auto Fruit : OFF"
    btn.BackgroundColor3 = enabled and Color3.fromRGB(0,170,0) or Color3.fromRGB(170,0,0)

    if enabled then
        task.spawn(function()
            while enabled do
                local folder = getFruitFolder()
                if folder then
                    for _,fruit in ipairs(folder:GetChildren()) do
                        if not enabled then break end
                        if isRealFruit(fruit) then
                            local hrp = getHRP()
                            hrp.CFrame = fruit.CFrame + Vector3.new(0,2,0)
                            task.wait(0.15)
                            firetouchinterest(hrp, fruit, 0)
                            task.wait()
                            firetouchinterest(hrp, fruit, 1)
                        end
                    end
                end
                task.wait(1)
            end
        end)
    end
end)
